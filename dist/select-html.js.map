{"version":3,"sources":["../src/select-html.js","../src/util.js"],"names":[],"mappings":"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","file":"select-html.js","sourcesContent":["import escapeHtml from 'escape-html';\nimport {\n  isObject,\n  isArray,\n  isFunction,\n  includes,\n} from './util';\n\nfunction getPropsHtml(props) {\n  let html = '';\n\n  Object.keys(props).forEach((key) => {\n    let prop = props[key];\n    if (prop === true) {\n      html += ` ${key}`;\n    } else {\n      prop = escapeHtml(String(prop));\n      html += ` ${key}=\"${prop}\"`;\n    }\n  });\n\n  return html;\n}\n\nfunction getNormalizedValue(value) {\n  let newValue;\n  if (isFunction(value)) {\n    newValue = value();\n  } else if (isArray(value)) {\n    newValue = value.slice();\n  } else if (value !== undefined) {\n    newValue = String(value);\n  }\n  return newValue;\n}\n\nfunction normalizeOptions(options) {\n  let list = [];\n\n  if (!isArray(options)) {\n    throw new TypeError('The settings.options must be an Array.');\n  }\n\n  if (options.length > 0) {\n    const firstItem = options[0];\n    if (isObject(firstItem)) {\n      list = options.slice();\n    } else if (isArray(firstItem)) {\n      for (let i = 0; i < options.length; i++) {\n        const pair = options[i];\n        list.push({\n          value: pair[0],\n          text: pair[1],\n          selected: false,\n          disabled: false,\n        });\n      }\n    } else {\n      for (let i = 0; i < options.length; i++) {\n        const v = String(options[i]);\n        list.push({\n          value: v,\n          text: v,\n          selected: false,\n          disabled: false,\n        });\n      }\n    }\n  }\n\n  return list;\n}\n\nfunction selectHtml(settings) {\n  const localSettings = Object.assign({}, settings);\n  const { props, transform } = localSettings;\n  let {\n    options,\n    defaultValue,\n    defaultText,\n    disabledValue,\n    disabledText,\n  } = localSettings;\n  let html = '';\n\n  html += '<select';\n  html += getPropsHtml(props);\n  html += '>';\n\n  defaultValue = getNormalizedValue(defaultValue);\n  defaultText = getNormalizedValue(defaultText);\n  disabledValue = getNormalizedValue(disabledValue);\n  disabledText = getNormalizedValue(disabledText);\n\n  options = normalizeOptions(options);\n\n  for (let i = 0; i < options.length; i++) {\n    let option = options[i];\n\n    if (isFunction(transform)) {\n      option = transform(option);\n    }\n\n    html += `<option value=\"${option.value}\"`;\n\n    if (includes(defaultValue, option.value) ||\n        includes(defaultText, option.text)) {\n      html += ' selected';\n    }\n\n    if (includes(disabledValue, option.value) ||\n        includes(disabledText, option.text)) {\n      html += ' disabled';\n    }\n\n    html += `>${option.text}</option>`;\n  }\n\n  html += '</select>';\n\n  return html;\n}\n\nexport default selectHtml;\n","function isType(typeName) {\n  return function type(o) {\n    return Object.prototype.toString.call(o) === `[object ${typeName}]`;\n  };\n}\n\nconst isString = isType('String');\nconst isObject = isType('Object');\nconst isArray = isType('Array');\nconst isFunction = isType('Function');\n\nfunction includes(array, value) {\n  return array.indexOf(value) > -1;\n}\n\nexport {\n  isString,\n  isObject,\n  isArray,\n  isFunction,\n  includes,\n};\n"]}